---
date: 2017-07-23 20:19
title: redis系列--控制台测试,查看
tags: [redis]
---

## 命令行测试

* `redis-cli -c -h ip地址 -p 端口号 -a 密码`
* `set good good`
* `get good`

## 常用操作

* `redis-cli -c -h 192.168.2.121 -p 6381 -a 12345678 cluster nodes` 查看当前集群下的节点
* `./redis-trib.rb add-node 127.0.0.1:7006 127.0.0.1:7000` 添加节点 将7006实例添加到7000节点所在的集群中
* 删除集群中某一个**主**节点

```text
如果删除的节点是主节点，这里我们删除127.0.0.1:7006节点，这个节点有1000个哈希槽
首先要把节点中的哈希槽转移到其他节点中，执行下面的命令
./redis-trib.rb reshard 127.0.0.1:7000
系统会提示我们要移动多少哈希槽，这里移动1000个，因为127.0.0.1:7006节点有1000个哈希槽
然后系统提示我们输入要接收这些哈希槽的节点的ID，这里使用127.0.0.1:7001的节点ID
然后要我们选择从那些节点中转出哈希槽，这里一定要输入127.0.0.1:7006这个节点的ID，最后输入 done  表示输入完毕
最后一步，使用下面的命令把这个节点删除
./redis-trib.rb del-node 127.0.0.1:7006 127.0.0.1:7006
```

* 删除集群中某一个**从**节点

`./redis-trib.rb del-node 127.0.0.1:7006 127.0.0.1:7006`

>[redis节点操作](http://blog.csdn.net/xu470438000/article/details/42972123)

* 使用redis-trib.rb 如果不能del-node 可以使用redis-cli -c..连接到集群以后 再cluster forget nodeID
* ![这里写图片描述](/images/redis/20170808200206254.jpg)